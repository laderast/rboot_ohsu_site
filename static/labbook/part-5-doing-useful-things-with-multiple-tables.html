<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Part 5: Doing useful things with multiple tables | Ready for R: Notebook Reference</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Part 5: Doing useful things with multiple tables | Ready for R: Notebook Reference" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="laderast/ready_for_r_site" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Part 5: Doing useful things with multiple tables | Ready for R: Notebook Reference" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Ted Laderas" />


<meta name="date" content="2020-05-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="more-about-factors.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Ready for R Reference</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.1</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html"><i class="fa fa-check"></i><b>2</b> Ready for R Part 1: Functions and Objects</a><ul>
<li class="chapter" data-level="2.1" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#before-you-get-started"><i class="fa fa-check"></i><b>2.1</b> Before you get Started</a></li>
<li class="chapter" data-level="2.2" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#welcome-to-ready-for-r"><i class="fa fa-check"></i><b>2.2</b> Welcome to Ready for R!</a></li>
<li class="chapter" data-level="2.3" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#learning-objectives"><i class="fa fa-check"></i><b>2.3</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.4" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#code-blocks"><i class="fa fa-check"></i><b>2.4</b> Code Blocks</a></li>
<li class="chapter" data-level="2.5" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#using-functions"><i class="fa fa-check"></i><b>2.5</b> Using Functions</a><ul>
<li class="chapter" data-level="2.5.1" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#challenge-1"><i class="fa fa-check"></i><b>2.5.1</b> <strong>Challenge 1:</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#assigning-objects"><i class="fa fa-check"></i><b>2.6</b> Assigning objects</a></li>
<li class="chapter" data-level="2.7" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#challenge-2"><i class="fa fa-check"></i><b>2.7</b> <strong>Challenge 2:</strong></a></li>
<li class="chapter" data-level="2.8" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#vectors"><i class="fa fa-check"></i><b>2.8</b> Vectors</a><ul>
<li class="chapter" data-level="2.8.1" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#challenge-3"><i class="fa fa-check"></i><b>2.8.1</b> <strong>Challenge 3:</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#data-types-and-vectors"><i class="fa fa-check"></i><b>2.9</b> Data types and Vectors</a><ul>
<li class="chapter" data-level="2.9.1" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#challenge-4"><i class="fa fa-check"></i><b>2.9.1</b> <strong>Challenge 4:</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#manipulating-vectors"><i class="fa fa-check"></i><b>2.10</b> Manipulating vectors</a></li>
<li class="chapter" data-level="2.11" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#missing-data"><i class="fa fa-check"></i><b>2.11</b> Missing data</a><ul>
<li class="chapter" data-level="2.11.1" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#challenge"><i class="fa fa-check"></i><b>2.11.1</b> <strong>Challenge:</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#wrapping-up"><i class="fa fa-check"></i><b>2.12</b> Wrapping up</a></li>
<li class="chapter" data-level="2.13" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#homework"><i class="fa fa-check"></i><b>2.13</b> Homework</a><ul>
<li class="chapter" data-level="2.13.1" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#object-manipulation"><i class="fa fa-check"></i><b>2.13.1</b> 1. Object manipulation</a></li>
<li class="chapter" data-level="2.13.2" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#vector-manipulation-character-data"><i class="fa fa-check"></i><b>2.13.2</b> 2. Vector manipulation (character data):</a></li>
</ul></li>
<li class="chapter" data-level="2.14" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#vector-manipulation-numerical-data"><i class="fa fa-check"></i><b>2.14</b> 3. Vector manipulation (numerical data):</a></li>
<li class="chapter" data-level="2.15" data-path="ready-for-r-part-1-functions-and-objects.html"><a href="ready-for-r-part-1-functions-and-objects.html#submitting-your-homework"><i class="fa fa-check"></i><b>2.15</b> Submitting your homework</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><i class="fa fa-check"></i><b>3</b> Introduction to R, Part 2: <code>data.frame</code>s, Reading Data, visualizing data with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#before-you-get-started-1"><i class="fa fa-check"></i><b>3.1</b> Before you get started</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#learning-objectives-1"><i class="fa fa-check"></i><b>3.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#a-note-about-base-r-versus-the-tidyverse"><i class="fa fa-check"></i><b>3.3</b> A note about Base R versus the Tidyverse</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#importing-spreadsheet-style-data-into-r"><i class="fa fa-check"></i><b>3.4</b> Importing spreadsheet-style data into R</a><ul>
<li class="chapter" data-level="3.4.1" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#a-good-place-to-put-your-data"><i class="fa fa-check"></i><b>3.4.1</b> A good place to put your data</a></li>
<li class="chapter" data-level="3.4.2" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#loading-our-excel-file"><i class="fa fa-check"></i><b>3.4.2</b> Loading our excel file</a></li>
<li class="chapter" data-level="3.4.3" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#challenge-1-5-minutes"><i class="fa fa-check"></i><b>3.4.3</b> Challenge 1 (5 minutes)</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#notes-on-the-data"><i class="fa fa-check"></i><b>3.5</b> Notes on the Data</a><ul>
<li class="chapter" data-level="3.5.1" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#challenge-2-5-minutes"><i class="fa fa-check"></i><b>3.5.1</b> Challenge 2 (5 minutes):</a></li>
<li class="chapter" data-level="3.5.2" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#tips-on-formating-your-excel-file-for-r"><i class="fa fa-check"></i><b>3.5.2</b> Tips on Formating your excel file for R</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#data.frames"><i class="fa fa-check"></i><b>3.6</b> <code>data.frame</code>s</a><ul>
<li class="chapter" data-level="3.6.1" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#data.frames---how-do-they-work"><i class="fa fa-check"></i><b>3.6.1</b> <code>data.frame</code>s - How do they Work?</a></li>
<li class="chapter" data-level="3.6.2" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#column-names"><i class="fa fa-check"></i><b>3.6.2</b> Column Names</a></li>
<li class="chapter" data-level="3.6.3" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#okay-whats-really-in-it"><i class="fa fa-check"></i><b>3.6.3</b> Okay, What’s really in it?</a></li>
<li class="chapter" data-level="3.6.4" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#summarizing-our-data"><i class="fa fa-check"></i><b>3.6.4</b> Summarizing our Data</a></li>
<li class="chapter" data-level="3.6.5" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#introducing-ggplot2"><i class="fa fa-check"></i><b>3.6.5</b> Introducing <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.6.6" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#working-towards-a-graph"><i class="fa fa-check"></i><b>3.6.6</b> Working Towards a Graph</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#ggplot2-a-grammar-of-graphics"><i class="fa fa-check"></i><b>3.7</b> <code>ggplot2</code>: A Grammar of Graphics</a><ul>
<li class="chapter" data-level="3.7.1" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#learning-to-read-ggplot2-code"><i class="fa fa-check"></i><b>3.7.1</b> Learning to read <code>ggplot2</code> code</a></li>
<li class="chapter" data-level="3.7.2" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#challenge-5"><i class="fa fa-check"></i><b>3.7.2</b> Challenge</a></li>
<li class="chapter" data-level="3.7.3" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#simple-arithmetic"><i class="fa fa-check"></i><b>3.7.3</b> Simple arithmetic</a></li>
<li class="chapter" data-level="3.7.4" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#color"><i class="fa fa-check"></i><b>3.7.4</b> Color</a></li>
<li class="chapter" data-level="3.7.5" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#titles"><i class="fa fa-check"></i><b>3.7.5</b> Titles</a></li>
<li class="chapter" data-level="3.7.6" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#changing-the-axis-labels"><i class="fa fa-check"></i><b>3.7.6</b> Changing the Axis Labels</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#what-you-learned-today"><i class="fa fa-check"></i><b>3.8</b> What you learned today:</a></li>
<li class="chapter" data-level="3.9" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#practice"><i class="fa fa-check"></i><b>3.9</b> Practice</a></li>
<li class="chapter" data-level="3.10" data-path="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html"><a href="introduction-to-r-part-2-data-frames-reading-data-visualizing-data-with-ggplot2.html#assignment-10-points"><i class="fa fa-check"></i><b>3.10</b> Assignment (10 points)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Ready for R Part 3: Data Visualization and Data Manipulation</a><ul>
<li class="chapter" data-level="4.1" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#learning-objectives-2"><i class="fa fa-check"></i><b>4.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#getting-set-up"><i class="fa fa-check"></i><b>4.2</b> Getting set up</a></li>
<li class="chapter" data-level="4.3" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#more-about-ggplot2"><i class="fa fa-check"></i><b>4.3</b> More about <code>ggplot2</code></a><ul>
<li class="chapter" data-level="4.3.1" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#customizing-a-scatterplot"><i class="fa fa-check"></i><b>4.3.1</b> Customizing a Scatterplot</a></li>
<li class="chapter" data-level="4.3.2" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#changing-visual-properties-using-built-in-themes"><i class="fa fa-check"></i><b>4.3.2</b> Changing visual properties using built in themes</a></li>
<li class="chapter" data-level="4.3.3" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#using-theme-to-customize"><i class="fa fa-check"></i><b>4.3.3</b> Using <code>theme()</code> to customize</a></li>
<li class="chapter" data-level="4.3.4" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#saving-your-work"><i class="fa fa-check"></i><b>4.3.4</b> Saving your work</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#brief-aside-categorical-data-factors"><i class="fa fa-check"></i><b>4.4</b> Brief Aside: Categorical Data (<code>factor</code>s)</a><ul>
<li class="chapter" data-level="4.4.1" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#levels-of-a-factor"><i class="fa fa-check"></i><b>4.4.1</b> Levels of a Factor</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#back-to-ggplot2-boxplots"><i class="fa fa-check"></i><b>4.5</b> Back to <code>ggplot2</code>: Boxplots</a><ul>
<li class="chapter" data-level="4.5.1" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#faceting-our-boxplot"><i class="fa fa-check"></i><b>4.5.1</b> Faceting our boxplot</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#further-learning"><i class="fa fa-check"></i><b>4.6</b> Further learning</a></li>
<li class="chapter" data-level="4.7" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#data-manipulation-using-dplyr"><i class="fa fa-check"></i><b>4.7</b> Data Manipulation using <code>dplyr</code></a><ul>
<li class="chapter" data-level="4.7.1" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#introducing-the-pipe"><i class="fa fa-check"></i><b>4.7.1</b> Introducing the pipe (<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="4.7.2" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#the-difference-between-and"><i class="fa fa-check"></i><b>4.7.2</b> The difference between <code>+</code> and <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.7.3" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#sorting-data-frames-using-arrange"><i class="fa fa-check"></i><b>4.7.3</b> Sorting Data Frames using <code>arrange()</code></a></li>
<li class="chapter" data-level="4.7.4" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#filtering-our-data"><i class="fa fa-check"></i><b>4.7.4</b> <code>filter()</code>ing our data</a></li>
<li class="chapter" data-level="4.7.5" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#filtering-requires-a-little-logic"><i class="fa fa-check"></i><b>4.7.5</b> Filtering requires a little logic</a></li>
<li class="chapter" data-level="4.7.6" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#more-about-comparison-and-logical-operators"><i class="fa fa-check"></i><b>4.7.6</b> More about Comparison and Logical Operators</a></li>
<li class="chapter" data-level="4.7.7" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#selecting-columns-using-select"><i class="fa fa-check"></i><b>4.7.7</b> Selecting columns using <code>select()</code></a></li>
<li class="chapter" data-level="4.7.8" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#the-difference-between-filter-and-select"><i class="fa fa-check"></i><b>4.7.8</b> The difference between <code>filter()</code> and <code>select()</code></a></li>
<li class="chapter" data-level="4.7.9" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#saving-our-results"><i class="fa fa-check"></i><b>4.7.9</b> Saving our results</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#what-you-learned-today-1"><i class="fa fa-check"></i><b>4.8</b> What you learned today</a></li>
<li class="chapter" data-level="4.9" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#practice-1"><i class="fa fa-check"></i><b>4.9</b> Practice</a></li>
<li class="chapter" data-level="4.10" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#acknowledgements-1"><i class="fa fa-check"></i><b>4.10</b> Acknowledgements</a></li>
<li class="chapter" data-level="4.11" data-path="ready-for-r-part-3-data-visualization-and-data-manipulation.html"><a href="ready-for-r-part-3-data-visualization-and-data-manipulation.html#assignment-3"><i class="fa fa-check"></i><b>4.11</b> Assignment 3</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html"><i class="fa fa-check"></i><b>5</b> Part 4: <code>mutate()</code>, <code>group_by()/summarize()</code></a><ul>
<li class="chapter" data-level="5.1" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#learning-objectives-3"><i class="fa fa-check"></i><b>5.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#getting-set-up-1"><i class="fa fa-check"></i><b>5.2</b> Getting set up</a></li>
<li class="chapter" data-level="5.3" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#mutate---a-confusing-name-a-powerful-dplyr-verb"><i class="fa fa-check"></i><b>5.3</b> <code>mutate()</code> - A confusing name, a powerful <code>dplyr</code> verb</a><ul>
<li class="chapter" data-level="5.3.1" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#using-mutate-to-calculate-a-new-variable-based-on-other-variables"><i class="fa fa-check"></i><b>5.3.1</b> Using <code>mutate</code> to calculate a new variable based on other variables</a></li>
<li class="chapter" data-level="5.3.2" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#your-turn"><i class="fa fa-check"></i><b>5.3.2</b> Your Turn</a></li>
<li class="chapter" data-level="5.3.3" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#using-mutate-to-make-our-character-variables-into-factors"><i class="fa fa-check"></i><b>5.3.3</b> Using <code>mutate</code> to make our <code>character</code> variables into <code>factors</code></a></li>
<li class="chapter" data-level="5.3.4" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#using-mutate-to-make-a-continuous-variable-categorical-using-case_when"><i class="fa fa-check"></i><b>5.3.4</b> Using <code>mutate</code> to make a continuous variable categorical using <code>case_when</code></a></li>
<li class="chapter" data-level="5.3.5" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#your-turn-1"><i class="fa fa-check"></i><b>5.3.5</b> Your Turn</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#group_bysummarize"><i class="fa fa-check"></i><b>5.4</b> <code>group_by()/summarize()</code></a><ul>
<li class="chapter" data-level="5.4.1" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#summarize"><i class="fa fa-check"></i><b>5.4.1</b> <code>summarize()</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#group_bysummarize-1"><i class="fa fa-check"></i><b>5.4.2</b> <code>group_by()/summarize()</code></a></li>
<li class="chapter" data-level="5.4.3" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#group_bysummarize-to-calculate-mean-and-standard-deviation-values"><i class="fa fa-check"></i><b>5.4.3</b> <code>group_by()/summarize</code> to calculate mean and standard deviation values</a></li>
<li class="chapter" data-level="5.4.4" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#group_by-to-count-things"><i class="fa fa-check"></i><b>5.4.4</b> <code>group_by()</code> to <code>count()</code> things</a></li>
<li class="chapter" data-level="5.4.5" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#your-turn-2"><i class="fa fa-check"></i><b>5.4.5</b> Your Turn</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#standardizing-variable-names-clean_names"><i class="fa fa-check"></i><b>5.5</b> Standardizing variable names: <code>clean_names()</code></a></li>
<li class="chapter" data-level="5.6" data-path="part-4-mutate-group-bysummarize.html"><a href="part-4-mutate-group-bysummarize.html#assignment-4"><i class="fa fa-check"></i><b>5.6</b> Assignment 4</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="more-about-factors.html"><a href="more-about-factors.html"><i class="fa fa-check"></i><b>6</b> More about Factors</a><ul>
<li class="chapter" data-level="6.1" data-path="more-about-factors.html"><a href="more-about-factors.html#making-a-factor-variable-out-of-disease"><i class="fa fa-check"></i><b>6.1</b> Making a factor variable out of disease</a></li>
<li class="chapter" data-level="6.2" data-path="more-about-factors.html"><a href="more-about-factors.html#using-the-character-variable"><i class="fa fa-check"></i><b>6.2</b> Using the character variable</a></li>
<li class="chapter" data-level="6.3" data-path="more-about-factors.html"><a href="more-about-factors.html#compare-to-the-factor-variable"><i class="fa fa-check"></i><b>6.3</b> Compare to the factor variable</a></li>
<li class="chapter" data-level="6.4" data-path="more-about-factors.html"><a href="more-about-factors.html#another-thing-about-factors"><i class="fa fa-check"></i><b>6.4</b> Another thing about factors</a></li>
<li class="chapter" data-level="6.5" data-path="more-about-factors.html"><a href="more-about-factors.html#fct_rev---reversing-the-order-of-a-factor"><i class="fa fa-check"></i><b>6.5</b> <code>fct_rev()</code> - reversing the order of a factor</a></li>
<li class="chapter" data-level="6.6" data-path="more-about-factors.html"><a href="more-about-factors.html#fct_reorder"><i class="fa fa-check"></i><b>6.6</b> <code>fct_reorder()</code></a></li>
<li class="chapter" data-level="6.7" data-path="more-about-factors.html"><a href="more-about-factors.html#fct_collapse"><i class="fa fa-check"></i><b>6.7</b> <code>fct_collapse</code></a></li>
<li class="chapter" data-level="6.8" data-path="more-about-factors.html"><a href="more-about-factors.html#other-really-useful-forcats-functions"><i class="fa fa-check"></i><b>6.8</b> Other really useful <code>forcats</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html"><i class="fa fa-check"></i><b>7</b> Part 5: Doing useful things with multiple tables</a><ul>
<li class="chapter" data-level="7.1" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#remember"><i class="fa fa-check"></i><b>7.1</b> Remember</a></li>
<li class="chapter" data-level="7.2" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#learning-objectives-4"><i class="fa fa-check"></i><b>7.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="7.3" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#getting-set-up-2"><i class="fa fa-check"></i><b>7.3</b> Getting set up</a></li>
<li class="chapter" data-level="7.4" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#bind_rows"><i class="fa fa-check"></i><b>7.4</b> <code>bind_rows()</code></a><ul>
<li class="chapter" data-level="7.4.1" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#motivation-for-bind_rows"><i class="fa fa-check"></i><b>7.4.1</b> Motivation for <code>bind_rows()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#binding-two-tables-together"><i class="fa fa-check"></i><b>7.5</b> Binding two tables together</a></li>
<li class="chapter" data-level="7.6" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#joining-tables"><i class="fa fa-check"></i><b>7.6</b> Joining Tables</a><ul>
<li class="chapter" data-level="7.6.1" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#motivation"><i class="fa fa-check"></i><b>7.6.1</b> Motivation</a></li>
<li class="chapter" data-level="7.6.2" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#naming-conventions"><i class="fa fa-check"></i><b>7.6.2</b> Naming conventions</a></li>
<li class="chapter" data-level="7.6.3" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#inner-joins"><i class="fa fa-check"></i><b>7.6.3</b> Inner Joins</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#joining-syntax"><i class="fa fa-check"></i><b>7.7</b> Joining Syntax</a><ul>
<li class="chapter" data-level="7.7.1" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#the-more-dplyr-way-to-do-joins"><i class="fa fa-check"></i><b>7.7.1</b> The more <code>dplyr</code> way to do joins</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#left-joins"><i class="fa fa-check"></i><b>7.8</b> Left Joins</a><ul>
<li class="chapter" data-level="7.8.1" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#lets-work-through-an-example"><i class="fa fa-check"></i><b>7.8.1</b> Let’s work through an example</a></li>
<li class="chapter" data-level="7.8.2" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#your-turn-3"><i class="fa fa-check"></i><b>7.8.2</b> Your Turn</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#making-your-data-long-pivot_longer"><i class="fa fa-check"></i><b>7.9</b> Making your data long: <code>pivot_longer()</code></a><ul>
<li class="chapter" data-level="7.9.1" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#however"><i class="fa fa-check"></i><b>7.9.1</b> However…</a></li>
<li class="chapter" data-level="7.9.2" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#the-magic-of-pivot_longer"><i class="fa fa-check"></i><b>7.9.2</b> The magic of <code>pivot_longer()</code></a></li>
<li class="chapter" data-level="7.9.3" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#doing-things-with-the-long-data"><i class="fa fa-check"></i><b>7.9.3</b> Doing things with the long data</a></li>
<li class="chapter" data-level="7.9.4" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#pivot_wider-exists-too"><i class="fa fa-check"></i><b>7.9.4</b> <code>pivot_wider()</code> exists too!</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="part-5-doing-useful-things-with-multiple-tables.html"><a href="part-5-doing-useful-things-with-multiple-tables.html#assignment"><i class="fa fa-check"></i><b>7.10</b> Assignment</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Ready for R: Notebook Reference</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="part-5-doing-useful-things-with-multiple-tables" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Part 5: Doing useful things with multiple tables</h1>
<div id="remember" class="section level2">
<h2><span class="header-section-number">7.1</span> Remember</h2>
<p>Save your own version before you do anything!</p>
</div>
<div id="learning-objectives-4" class="section level2">
<h2><span class="header-section-number">7.2</span> Learning Objectives</h2>
<ul>
<li><strong>Learn</strong> and <strong>apply</strong> <code>bind_rows()</code> to combine rows from two or more datasets</li>
<li><strong>Learn</strong> about the different kinds of joins and how they merge data</li>
<li><strong>Apply</strong> <code>inner_join()</code> and <code>left_join()</code> to join tables on columns</li>
<li><strong>Standardize</strong> variable names using <code>clean_names()</code></li>
<li><strong>Utilize</strong> <code>pivot_longer()</code> to make a <em>wide</em> dataset <em>long</em></li>
</ul>
</div>
<div id="getting-set-up-2" class="section level2">
<h2><span class="header-section-number">7.3</span> Getting set up</h2>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" title="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<pre><code>## -- Attaching packages ------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.0     v purrr   0.3.4
## v tibble  3.0.1     v dplyr   0.8.5
## v tidyr   1.1.0     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.5.0</code></pre>
<pre><code>## -- Conflicts ---------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" title="1"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb187-2" title="2"><span class="kw">library</span>(janitor)</a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" title="1"><span class="kw">library</span>(here)</a></code></pre></div>
<pre><code>## here() starts at C:/Code/ready_for_r_site/static/book</code></pre>
</div>
<div id="bind_rows" class="section level2">
<h2><span class="header-section-number">7.4</span> <code>bind_rows()</code></h2>
<div id="motivation-for-bind_rows" class="section level3">
<h3><span class="header-section-number">7.4.1</span> Motivation for <code>bind_rows()</code></h3>
<p>Imagine that your lab is part of a large consortium studying the effects of smoking. As the lead data scientist, you’ve helped oversee the collection and documentation several observations for many variables of interest.</p>
<p>Many labs within the consortium have accumulated data, and not all were following the guidelines you set for the tables.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" title="1">smoke_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="kw">here</span>(<span class="st">&#39;data/smoke_1.xlsx&#39;</span>), </a>
<a class="sourceLine" id="cb192-2" title="2">                      <span class="dt">sheet=</span><span class="dv">1</span>, </a>
<a class="sourceLine" id="cb192-3" title="3">                      <span class="dt">na=</span><span class="st">&quot;NA&quot;</span>)</a>
<a class="sourceLine" id="cb192-4" title="4"></a>
<a class="sourceLine" id="cb192-5" title="5">smoke_<span class="dv">1</span></a></code></pre></div>
<pre><code>## # A tibble: 549 x 5
##    primary_diagnosis tumor_stage age_at_diagnosis vital_status morphology
##    &lt;chr&gt;             &lt;chr&gt;                  &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;     
##  1 C34.1             stage ia               24477 dead         8070/3    
##  2 C34.1             stage ib               26615 dead         8070/3    
##  3 C34.3             stage ib               28171 dead         8070/3    
##  4 C34.1             stage ia               27154 alive        8083/3    
##  5 C34.1             stage iiia             23370 alive        8070/3    
##  6 C34.3             stage ib               19025 dead         8070/3    
##  7 C34.3             stage iv               26938 dead         8070/3    
##  8 C34.1             stage ib               28430 dead         8070/3    
##  9 C34.1             stage iib              30435 dead         8070/3    
## 10 C34.9             stage iv               24019 dead         8070/3    
## # ... with 539 more rows</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" title="1">smoke_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="kw">here</span>(<span class="st">&#39;data/smoke_2.xlsx&#39;</span>), </a>
<a class="sourceLine" id="cb194-2" title="2">                      <span class="dt">sheet=</span><span class="dv">1</span>, </a>
<a class="sourceLine" id="cb194-3" title="3">                      <span class="dt">na=</span><span class="st">&quot;NA&quot;</span>)</a>
<a class="sourceLine" id="cb194-4" title="4"></a>
<a class="sourceLine" id="cb194-5" title="5">smoke_<span class="dv">2</span></a></code></pre></div>
<pre><code>## # A tibble: 603 x 5
##    primary_diagnosis tumor_stage age_at_diagnosis vital_status morphology
##    &lt;chr&gt;             &lt;chr&gt;                  &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;     
##  1 C67.9             stage iv               17682 alive        8120/3    
##  2 C67.9             stage ii               19776 alive        8120/3    
##  3 C67.9             stage iii              23631 alive        8120/3    
##  4 C67.9             stage iv               26546 dead         8120/3    
##  5 C67.9             stage iii              24534 dead         8120/3    
##  6 C67.9             stage iv               25134 dead         8120/3    
##  7 C67.2             stage iii              26527 alive        8120/3    
##  8 C67.3             stage ii               24343 alive        8120/3    
##  9 C67.9             stage iv               27684 dead         8120/3    
## 10 C67.2             stage iv               27049 alive        8120/3    
## # ... with 593 more rows</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" title="1">smoke_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="kw">here</span>(<span class="st">&#39;data/smoke_3.xlsx&#39;</span>), </a>
<a class="sourceLine" id="cb196-2" title="2">                      <span class="dt">sheet=</span><span class="dv">1</span>, </a>
<a class="sourceLine" id="cb196-3" title="3">                      <span class="dt">na=</span><span class="st">&quot;NA&quot;</span>)</a>
<a class="sourceLine" id="cb196-4" title="4"></a>
<a class="sourceLine" id="cb196-5" title="5">smoke_<span class="dv">3</span></a></code></pre></div>
<pre><code>## # A tibble: 603 x 5
##    VITAL_STATUS `Age at Diagnosis` tumorStage Morphology primary_diagnosis
##    &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;            
##  1 alive                     17682 stage iv   8120/3     C67.9            
##  2 alive                     19776 stage ii   8120/3     C67.9            
##  3 alive                     23631 stage iii  8120/3     C67.9            
##  4 dead                      26546 stage iv   8120/3     C67.9            
##  5 dead                      24534 stage iii  8120/3     C67.9            
##  6 dead                      25134 stage iv   8120/3     C67.9            
##  7 alive                     26527 stage iii  8120/3     C67.2            
##  8 alive                     24343 stage ii   8120/3     C67.3            
##  9 dead                      27684 stage iv   8120/3     C67.9            
## 10 alive                     27049 stage iv   8120/3     C67.2            
## # ... with 593 more rows</code></pre>
</div>
</div>
<div id="binding-two-tables-together" class="section level2">
<h2><span class="header-section-number">7.5</span> Binding two tables together</h2>
<p>How can you combine datasets from individual labs? Enter <code>bind_rows()</code>…</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" title="1">smoke_<span class="dv">1</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">bind_rows</span>(smoke_<span class="dv">2</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1,152 x 5
##    primary_diagnosis tumor_stage age_at_diagnosis vital_status morphology
##    &lt;chr&gt;             &lt;chr&gt;                  &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;     
##  1 C34.1             stage ia               24477 dead         8070/3    
##  2 C34.1             stage ib               26615 dead         8070/3    
##  3 C34.3             stage ib               28171 dead         8070/3    
##  4 C34.1             stage ia               27154 alive        8083/3    
##  5 C34.1             stage iiia             23370 alive        8070/3    
##  6 C34.3             stage ib               19025 dead         8070/3    
##  7 C34.3             stage iv               26938 dead         8070/3    
##  8 C34.1             stage ib               28430 dead         8070/3    
##  9 C34.1             stage iib              30435 dead         8070/3    
## 10 C34.9             stage iv               24019 dead         8070/3    
## # ... with 1,142 more rows</code></pre>
<p><code>bind_rows()</code> allows you to append one dataset to the bottom of another dataset. We can see that <code>smoke_1</code> contained 549 rows and <code>smoke_2</code> contained 603 rows. After using <code>bind_rows()</code>, we now have a single dataset containing 1152 rows.</p>
<p>That’s all pretty cool, until you meet a rogue lab. This lab almost seems as if they’ve gone out of their way to make things difficult. Rather than putting columns in the standard order specified, they’ve switched them around.</p>
<p>Even worse, they’ve named the columns differently! If there are only a few columns, sure, we could manually fix this. But what if this was RNASeq data, with thousands of column names to fix?!</p>
<p>Well, let’s remember we still have <code>clean_names()</code>. That can at least help us get the column names into the standard format.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" title="1">smoke_<span class="dv">3</span>_clean &lt;-<span class="st"> </span>smoke_<span class="dv">3</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb200-2" title="2"><span class="st">    </span><span class="kw">clean_names</span>()</a></code></pre></div>
<p>Our column names are at least the same, but they’re still out of order! If we append <code>smoke_3_clean</code> to <code>smoke_1</code>, <code>vital_status</code> will be appened under <code>primary_diagnosis</code>, <code>age_at_diagnosis</code> will be appended under <code>tumor_stage</code>, and so on. Do we need to reorder the columns before we append them?</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" title="1">smoke_<span class="dv">1</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb201-2" title="2"><span class="st">    </span><span class="kw">bind_rows</span>(smoke_<span class="dv">3</span>_clean) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb201-3" title="3"><span class="st">    </span><span class="kw">View</span>()</a></code></pre></div>
<p>Well look at that. <code>bind_rows()</code> takes care of the out-of-order columns for us!</p>
</div>
<div id="joining-tables" class="section level2">
<h2><span class="header-section-number">7.6</span> Joining Tables</h2>
<div id="motivation" class="section level3">
<h3><span class="header-section-number">7.6.1</span> Motivation</h3>
<p>You have data on patients from two sources - one are labs, and they supply patient ids. The second source comes from an electronic medical record. How do you combine these two into a single table?</p>
</div>
<div id="naming-conventions" class="section level3">
<h3><span class="header-section-number">7.6.2</span> Naming conventions</h3>
<p><img src="image/original-dfs.png" />
source: <a href="https://github.com/gadenbuie/tidyexplain" class="uri">https://github.com/gadenbuie/tidyexplain</a></p>
<p>Before we talk about joins, we need to define some terms.</p>
<p><code>left table</code> and <code>right table</code>: Whenever we join two tables, we will have</p>
<ul>
<li>a <em>left</em> table (in this case, the <code>x</code> table) and</li>
<li>a <em>right</em> table (in this case, the <code>y</code> table).</li>
</ul>
<p><code>key</code>: In order to join the two tables, we have to somehow map the rows of our left table (<code>x</code>) with the rows of our other table (<code>y</code>). We do this by joining together rows with a common variable. In our case, we need to join rows based on the first column in both tables. The column that we join on is called a <em>key</em>.</p>
<p><img src="image/original-dfs.png" />
source: <a href="https://github.com/gadenbuie/tidyexplain" class="uri">https://github.com/gadenbuie/tidyexplain</a></p>
<p>In the above example, we see that there is a row in <code>x</code> whose <em>key</em> is 2, and there is a row in <code>y</code> whose <em>key</em> is 2 as well. So it makes sense to join these two rows together.</p>
<p>So, by matching the rows with identical keys, we can put together a table that incorporates information from both tables.</p>
</div>
<div id="inner-joins" class="section level3">
<h3><span class="header-section-number">7.6.3</span> Inner Joins</h3>
<p><img src="image/inner-join.gif" alt="Inner join animation" />
source: <a href="https://github.com/gadenbuie/tidyexplain" class="uri">https://github.com/gadenbuie/tidyexplain</a></p>
<p>With an inner join, we are matching rows based on our <em>key</em>. If there is not a match in both tables, we don’t include the row with that key.</p>
<p>In the example above, we don’t keep row 3 in table x or row 4 in table y.</p>
</div>
</div>
<div id="joining-syntax" class="section level2">
<h2><span class="header-section-number">7.7</span> Joining Syntax</h2>
<p>Keeping these terms in mind, let’s look at the syntax for joining two tables together.</p>
<pre><code>inner_join(table_x, table_y,
          by = c(key_column_x = key_column_y)
          )</code></pre>
<p>If we just wanted to join the two tables, the above is enough. We first specify the left table (<code>table_x</code>), and the right table (<code>table_y</code>).</p>
<p>Note the <code>by</code> argument. This is the argument where we specify which column in each table contains our key.</p>
<div id="the-more-dplyr-way-to-do-joins" class="section level3">
<h3><span class="header-section-number">7.7.1</span> The more <code>dplyr</code> way to do joins</h3>
<p>The more <code>dplyr</code> way to do joins is below:</p>
<pre><code>#start with left table
table_x %&gt;% 

  #join left table with right table
  inner_join(y = table_y, 
  
  #point out the key column in each table
    by = c(key_column_x= key_column_y)
    )</code></pre>
<p>We start with our <em>left</em> table, <code>table_x</code>. The main difference is that we don’t need to specify the <code>x</code> argument in <code>inner_join()</code>, because we are piping <code>table_x</code> as the first argument of <code>inner_join()</code>.</p>
</div>
</div>
<div id="left-joins" class="section level2">
<h2><span class="header-section-number">7.8</span> Left Joins</h2>
<p><img src="image/left-join.gif" /></p>
<p>Left joins are a little different. In a <em>left join</em>, we keep all the rows in the left table regardless of whether there is a match in the right table.</p>
<p>In the example above, we keep row 3 in table x even though it doesn’t have a match in table y.</p>
<p>Because there is no information from the right table, these rows will have an <code>NA</code>. That is, the information is missing for the columns that come from the right table.</p>
<div id="lets-work-through-an-example" class="section level3">
<h3><span class="header-section-number">7.8.1</span> Let’s work through an example</h3>
<p>Say we have a set of patients. We want to join their information with their labs, in particular a white blood cell count (a WBC).</p>
<p>We also need to know whether there are patients in our set who haven’t gotten a CBC.</p>
<p>Because the lab system isn’t part of the electronic health record, we’ll need to make a join on the patient table to the lab table.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" title="1">patient_table &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/patient_example.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb204-2" title="2"></a>
<a class="sourceLine" id="cb204-3" title="3">wbc_table &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/patient_example.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="dv">2</span>)</a></code></pre></div>
<p>Let’s look at <code>patient_table</code>, which we’ll use as our <em>left table</em>:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" title="1">patient_table</a></code></pre></div>
<pre><code>## # A tibble: 4 x 4
##   patient_id first_name last_name   age
##        &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;
## 1       2333 Scarlet    O&#39;Hara       75
## 2       7359 Neil       O&#39;Hara       30
## 3       1414 Ivy        Lee          43
## 4       8424 May        Lynne        14</code></pre>
<p>Here is <code>wbc_table</code>, which we’ll use as our <em>right table</em>:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb207-1" title="1">wbc_table</a></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   patient_id wbc_value
##        &lt;dbl&gt;     &lt;dbl&gt;
## 1       2333      5000
## 2       7359     12000
## 3       1414      6000
## 4       4409      4000</code></pre>
<p>Let’s do an <code>inner_join()</code>:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" title="1">patient_table <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb209-2" title="2"><span class="st">  </span><span class="kw">inner_join</span>(<span class="dt">y =</span> wbc_table,</a>
<a class="sourceLine" id="cb209-3" title="3">            <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;patient_id&quot;</span> =<span class="st"> &quot;patient_id&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   patient_id first_name last_name   age wbc_value
##        &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1       2333 Scarlet    O&#39;Hara       75      5000
## 2       7359 Neil       O&#39;Hara       30     12000
## 3       1414 Ivy        Lee          43      6000</code></pre>
</div>
<div id="your-turn-3" class="section level3">
<h3><span class="header-section-number">7.8.2</span> Your Turn</h3>
<p>Modify the code below to do a <code>left_join()</code> on <code>patient_table</code> and <code>wbc_table</code>.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" title="1">patient_table <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb211-2" title="2"><span class="st">  </span><span class="kw">inner_join</span>(<span class="dt">y =</span> wbc_table,</a>
<a class="sourceLine" id="cb211-3" title="3">            <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;patient_id&quot;</span> =<span class="st"> &quot;patient_id&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   patient_id first_name last_name   age wbc_value
##        &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1       2333 Scarlet    O&#39;Hara       75      5000
## 2       7359 Neil       O&#39;Hara       30     12000
## 3       1414 Ivy        Lee          43      6000</code></pre>
<p>Which patient in <code>patient_table</code> didn’t get a WBC?</p>
</div>
</div>
<div id="making-your-data-long-pivot_longer" class="section level2">
<h2><span class="header-section-number">7.9</span> Making your data long: <code>pivot_longer()</code></h2>
<p><img src="image/tidyr-spread-gather.gif" /></p>
<p>The last thing we’ll talk about is the difference between the <em>wide</em> data format and the <em>long</em> data format.</p>
<p>A really common format in bioinformatics is the <em>expression matrix</em>.</p>
<p>In an <em>expression matrix</em>,
the <em>rows</em> correspond to different <em>genes</em> and
the <em>columns</em> correspond to different <em>samples</em>.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" title="1">expression_example &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/expression_example.xlsx&quot;</span>, <span class="dt">sheet=</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb213-2" title="2"></a>
<a class="sourceLine" id="cb213-3" title="3">expression_example</a></code></pre></div>
<pre><code>## # A tibble: 4 x 5
##   gene_symbol tcga_110 tcga_332 tcga_548 tcga_523
##   &lt;chr&gt;          &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 PTEN             4.1      5.6      2.2      2.1
## 2 MTOR             5.6      6.6      3.1      3.2
## 3 RKIP             1        1.4      1.2      1.2
## 4 KCNJ9            2.3      1.1      0.5      0.2</code></pre>
<div id="however" class="section level3">
<h3><span class="header-section-number">7.9.1</span> However…</h3>
<p>This format isn’t super useful for a lot of data manipulations.</p>
<p>It’s because the columns correspond to samples, and this prevents us from plotting things like PTEN expression across the samples.</p>
<p>This kind of data is in a format that is called <em>wide</em> format. What we need to do is collapse the numerical values into a single column.</p>
</div>
<div id="the-magic-of-pivot_longer" class="section level3">
<h3><span class="header-section-number">7.9.2</span> The magic of <code>pivot_longer()</code></h3>
<p><img src="image/tidyr-spread-gather.gif" /></p>
<p><code>pivot_longer()</code> is the function that will let us make our <em>wide</em> data <em>long</em>.</p>
<p>It takes three arguments</p>
<ul>
<li><p><code>cols</code> - the columns to collapse. We haven’t talked about <code>tidyselect</code> verbs, but there are a few that let you select columns based on naming criteria. Here we’re using the <code>starts_with()</code> selector to grab the columns that begin with <code>tcga</code></p></li>
<li><p><code>names_to</code> - the name of the column where the labels will be consolidated to</p></li>
<li><p><code>values_to</code> - the name of the column where the values in the columns in the wide data will be consolidated to.</p></li>
</ul>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" title="1">expression_long &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb215-2" title="2"><span class="st">  </span>expression_example <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb215-3" title="3"><span class="st">    </span><span class="kw">pivot_longer</span>(<span class="dt">cols=</span> <span class="kw">starts_with</span>(<span class="st">&quot;tcga&quot;</span>), </a>
<a class="sourceLine" id="cb215-4" title="4">                 <span class="dt">names_to =</span> <span class="st">&quot;sample&quot;</span>, </a>
<a class="sourceLine" id="cb215-5" title="5">                 <span class="dt">values_to =</span> <span class="st">&quot;expression&quot;</span>)</a>
<a class="sourceLine" id="cb215-6" title="6"></a>
<a class="sourceLine" id="cb215-7" title="7">expression_long</a></code></pre></div>
<pre><code>## # A tibble: 16 x 3
##    gene_symbol sample   expression
##    &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt;
##  1 PTEN        tcga_110        4.1
##  2 PTEN        tcga_332        5.6
##  3 PTEN        tcga_548        2.2
##  4 PTEN        tcga_523        2.1
##  5 MTOR        tcga_110        5.6
##  6 MTOR        tcga_332        6.6
##  7 MTOR        tcga_548        3.1
##  8 MTOR        tcga_523        3.2
##  9 RKIP        tcga_110        1  
## 10 RKIP        tcga_332        1.4
## 11 RKIP        tcga_548        1.2
## 12 RKIP        tcga_523        1.2
## 13 KCNJ9       tcga_110        2.3
## 14 KCNJ9       tcga_332        1.1
## 15 KCNJ9       tcga_548        0.5
## 16 KCNJ9       tcga_523        0.2</code></pre>
</div>
<div id="doing-things-with-the-long-data" class="section level3">
<h3><span class="header-section-number">7.9.3</span> Doing things with the long data</h3>
<p>Now that we have our long data, we can do our usual kinds of plotting.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" title="1"><span class="kw">ggplot</span>(expression_long) <span class="op">+</span></a>
<a class="sourceLine" id="cb217-2" title="2"><span class="st">  </span><span class="kw">aes</span>(<span class="dt">x=</span>gene_symbol, <span class="dt">y=</span>expression, <span class="dt">fill=</span>gene_symbol) <span class="op">+</span></a>
<a class="sourceLine" id="cb217-3" title="3"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="06-part5_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>We can even make expression heatmaps with <code>geom_tile</code>.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" title="1"><span class="kw">ggplot</span>(expression_long) <span class="op">+</span></a>
<a class="sourceLine" id="cb218-2" title="2"><span class="st">  </span><span class="kw">aes</span>(<span class="dt">x=</span>sample, <span class="dt">y=</span> gene_symbol, <span class="dt">fill=</span>expression) <span class="op">+</span></a>
<a class="sourceLine" id="cb218-3" title="3"><span class="st">  </span><span class="kw">geom_tile</span>()</a></code></pre></div>
<p><img src="06-part5_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="pivot_wider-exists-too" class="section level3">
<h3><span class="header-section-number">7.9.4</span> <code>pivot_wider()</code> exists too!</h3>
<p>And part of your assignment will be to figure out how to use it.</p>
</div>
</div>
<div id="assignment" class="section level2">
<h2><span class="header-section-number">7.10</span> Assignment</h2>
<ol style="list-style-type: decimal">
<li><p>Use <code>bind_rows()</code> to bind all three <code>smoke</code> datasets (<code>smoke_1</code>, <code>smoke_2</code>, and <code>smoke_3</code>) together. Hint: you’ll have to do two <code>bind_row()</code> operations.</p></li>
<li><p>Take a look at the <code>patient</code> and <code>patient_encounter</code> tables loaded below.</p></li>
</ol>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" title="1">patient &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/patient_example.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   patient_id = col_double(),
##   GENDER = col_character(),
##   First_name = col_character(),
##   Last_name = col_character(),
##   status = col_double(),
##   Insurance_ID = col_double(),
##   race = col_double(),
##   postalcode = col_double(),
##   riskCat = col_character(),
##   riskscore = col_double()
## )</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb221-1" title="1">patient_encounter &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/patient_enc_example.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   patientid = col_double(),
##   Event_ID = col_double(),
##   outcome = col_character(),
##   Admit_date = col_character(),
##   Admit_source = col_character()
## )</code></pre>
<p>How many rows does each table have?</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb223-1" title="1"><span class="kw">nrow</span>()</a>
<a class="sourceLine" id="cb223-2" title="2"><span class="kw">nrow</span>()</a></code></pre></div>
<p>Write a <code>inner_join()</code> and assign it to <code>inner_patient</code> with</p>
<ul>
<li><code>patient</code> as the <em>left</em> table</li>
<li><code>patient_encounter</code> as the <em>right</em> table</li>
<li>joining on the approriate columns (look at the column names carefully!)</li>
</ul>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" title="1">inner_patient &lt;-<span class="st"> </span>patient <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb224-2" title="2"><span class="st">  </span><span class="kw">inner_join</span>(<span class="dt">y =</span> ____, <span class="dt">by =</span> <span class="kw">c</span>())</a>
<a class="sourceLine" id="cb224-3" title="3"></a>
<a class="sourceLine" id="cb224-4" title="4">inner_patient</a></code></pre></div>
<p>How many rows does <code>inner_patient</code> have?</p>
<p>Do a <code>left_join</code> of the two tables with the same criteria as above. Assign it to <code>left_patient</code>.</p>
<p>Count the number of rows in <code>left_patient</code>. Is it what you expected?</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" title="1">left_patient &lt;-<span class="st"> </span>patient <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb225-2" title="2"><span class="st">  </span><span class="kw">left_join</span>()</a>
<a class="sourceLine" id="cb225-3" title="3"></a>
<a class="sourceLine" id="cb225-4" title="4"><span class="kw">nrow</span>(left_patient)</a></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Look up the documentation for <code>pivot_wider</code>. Transform <code>expression_longer</code> back to a <em>wide</em> format, but this time with <strong>columns</strong> as <em>genes</em> and <strong>rows</strong> as <em>samples</em>.</li>
</ol>
<p>Hint: Always look at the examples in the documentation! They’ll help you.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" title="1">expression_longer <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb226-2" title="2"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> ,</a>
<a class="sourceLine" id="cb226-3" title="3">              <span class="dt">names_from =</span> ,</a>
<a class="sourceLine" id="cb226-4" title="4">              values_from)</a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="more-about-factors.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/06-part5.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ready-for-r.pdf", "ready-for-r.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
